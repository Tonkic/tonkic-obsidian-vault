```C++
//等差数列版
void set(long long l, long long r, long long s, long long e) {
    long long d = (e - s) / (r - l);
    an[l] += s;
    an[l + 1] += d - s;
    an[r + 1] -= d + e;
    an[r + 2] += e;
}

void build() {
    for (long long i = 1; i <= N; i++) {
        an[i] += an[i-1];
    }
    for (long long i = 1; i <= N; i++) {
        an[i] += an[i-1];
    }
}
```