---
tags:
  - 计算机组成原理
---
# 进制转化
## 10进制=> 2进制
整数部分：除基取余法
- 短除法，倒过来看
小数部分：乘基取整法
- 取整数部分，0.6取0，1.2取1然后-1得到0.2
# 定点数的表示
## 定点数
小数点位置固定的数
## 原码
## 补码
### 补码快速计算真值
- 符号位负数，其他位正数
- 如补码1101=-8+4+1=-3
### 由x补求-x补
符号位、数值位全部取反、末位加1
### 补码移位
逻辑移位
- 直接左移
算术移位
- 补码左移低位补0，右移高位补符号位
- 左移符号位改变则溢出
## 反码
## 移码
原码+偏置
# 运算方法和运算电路
## 1.基本运算部件
加法器，算术逻辑部件(ALU)
## 2.加/减运算
### **补码加/减运算器**
### 补码全加器的实现
#### 异或的实现
$S = (A \land \neg B) \lor (\neg A \land B)$
#### 概念
A被加数的一位
B加数的一位
C_in前一位的进位
C_out正在计算的这一位的进位
S这一位的结果
#### 计算过程
$S = A \oplus B \oplus C_{\text{in}}$
$C_{\text{out}} = (A \land B) \lor (C_{\text{in}} \land (A \oplus B))$
- $(A \land B)$ 1+1是进位必为1
- $(C_{\text{in}} \land (A \oplus B))$ 0+1/1+0时，C_in为1则进一	
### **标志位的生成**
用一个电路就能实现加减法(A直接进加法器，B通过MUX选择后进加法器)
- 通过mux实现两条路（一条直接加，另一条取反+1之后加）
- sub信号是1表示是减法
#### 零标志、ZF
#### 溢出标志、OF
对有符号数才有用
单符号位
- 符号位进位和最高数位进位异或$C_{\text{n.out}} \oplus C_{\text{(n-1).out}}$
- 补码减法时，最低位会有一个sub信号表示上一位进位是1
双符号位
- 两个符号位异或
#### 符号标志、SF
单符号位直接=符号位，双符号位取实际符号位
#### 进位标志、CF
无符号数才有用
$(C_{\text{in}}或sub) \oplus C_{\text{out}}$
1. sub和cin是一样的
2. 减法时cin恒等于1
	- 因为 已知x补 求 -x补 需要全部取反+1，MUX只负责取反，+1由cin完成
	- 例10111（-9补码）-11000（-8补码）=-1，直接10111+00111，最低位进位需要设为1得11111（-1补码）
加法时，CF = 1表示无符号数加法溢出
减法时，CF = 1表示有借位，即不够减
## 3.乘/除运算
乘/除法运算的基本原理，乘法电路和除法电路的基本结构
### 乘法
#### 原码一位乘法
先异或确认符号位，然后加法一次右移一次，乘法转为多次加法
#### 补码一位乘法
每次加法可能 +0 、+（x补）、+（-x补），加完之后符号位自动确认
n轮加法、算数右移，加法规则如下:
- 01辅助位-MQ中最低位=1时，(ACC)+（x补）
- 11/00辅助位-MQ中最低位=0时，(ACC)+0
- 10辅助位-MQ中最低位=-1时，(ACC)+（-x补）
- 其中辅助位时后一位，MQ中最低位是前一位，被乘数最后开始取到前面，两位两位的取
# 整数的表示和运算
## 1.无符号整数的表示和运算
## 2.带符号整数的表示和运算
# 浮点数的表示和运算
## 1.浮点数的表示
### IEEE 754 标准
#### 特殊00/01/10/11
阶码全0，尾数全0即为0【正负之分看最高符号位】
阶码全0，尾数不全为0，取消隐含1规则，实际数为0.M * 2^**-126** 
阶码全1，尾数全0，代表无穷【正负之分看符号】
阶码全1，尾数不为0，无效数
## 2.浮点数的加/减运算
- 对阶-小对大
- 尾数加减
- 规格化
	- 左规：当浮点数运算的结果为非规格化时要进行规格化处理，将尾数算术左移， 阶码减1。
	- 右规：当浮点数运算的结果尾数出现溢出（双符号位为01或10）时，将尾数算术右移一位，阶码加1。
- 舍入
    - 截断法
	- 恒置1法
	- 0舍1入法（可能导致尾数溢出，需要右规）
- 判溢出
# 补充
## 强制类型转换
- float转int
	- 去尾  如：（int）9.99=9    
- int转float
	- 可能会有精度丢失
	- 虽然int和float都是32位，但是int32都可以表示数据，float只有23位表示数据，32位精度转23位精度会丢失      
- short转int
	- 无符号补零
	- 有符号补码存储补1
